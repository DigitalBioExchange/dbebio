<!--! 56_2_Health_screening_insert(popup) !-->
<?php 
$page_option = "header-white";
require_once('./inc/header.html');?>
<!-- *헤더* include -->



<!-- *컨텐츠* 시작 -->
<section id="content">
	<div class="inner-wrap">
		<div class="sub-title-area">
			<h1>검진정보</h1>
		</div>

		<form method="post" action="">
			<div class="sub-title-small">
				<h1>기본정보</h1>
				<span>* 필수항목</span>
			</div>
			<div class="block-type-area">
				<ul>
					<li>
						<div class="title"><span>*</span> 검진일</div>
						<div class="con">
							<input type="text" class="input-regular datepicker-here icon-type radius4" data-language="ko" name=""
								placeholder="YYYY-MM-DD" />
						</div>
					</li>
					<li>
						<div class="title"><span>*</span> 검진기관</div>
						<div class="con">
							<input type="text" class="input-regular radius4" name="" placeholder="검진기관명을 입력해주세요" />
						</div>
					</li>
				</ul>
			</div>

			<div class="sub-title-small margin-t8">
				<h1>비만도 측정</h1>
			</div>
			<div class="block-type-area">
				<ul>
					<li>
						<div class="title"><span>*</span> 신장</div>
						<div class="con">
							<div class="unit">
								<input type="text" id="" name="" placeholder="신장을 입력해주세요" class="input-regular unit-add" required>
								<span>cm</span>
							</div>
						</div>
					</li>
					<li>
						<div class="title"><span>*</span> 체중</div>
						<div class="con">
							<div class="unit">
								<input type="text" id="" name="" placeholder="체중을 입력해주세요" class="input-regular unit-add" required>
								<span>kg</span>
							</div>
						</div>
					</li>
					<li>
						<div class="title"><span>*</span> 허리둘레</div>
						<div class="con">
							<input type="text" id="" name="" placeholder="허리둘레를 입력해주세요" class="input-regular radius4 unit-add2"
								required>
							<select name="" class="input-regular radius4">
								<option value="" selected="selected">inch</option>
								<option value=""></option>
							</select>
						</div>
					</li>
					<li>
						<div class="title">체질량지수(BMI)</div>
						<div class="con">
							<div class="unit">
								<input type="text" id="" name="" placeholder="체질량지수를 입력해주세요" class="input-regular unit-add">
								<span>kg/m²</span>
							</div>
						</div>
					</li>
				</ul>
			</div>

			<div class="sub-title-small margin-t8">
				<h1>검진결과 확인 및 질병 예측</h1>
				<p>고혈압, 당뇨, 이상지질혈증, 동맥경화 등의 정보를 입력해주세요.</p>
			</div>
			<div class="block-type-area">
				<ul>
					<li>
						<div class="title">혈압</div>
						<div class="con">
							<div class="blood-pressure">
								<!-- blood-pressure 시작 -->
								<div>
									<div class="unit">
										<input type="text" id="" name="" placeholder="수축기 혈압" class="input-regular unit-add">
										<span>mmHg</span>
									</div>
									<p class="help-text">- 참고치(정상): 120 미만</p>
								</div>
								<div>
									<div class="unit">
										<input type="text" id="" name="" placeholder="수축기 혈압" class="input-regular unit-add">
										<span>mmHg</span>
									</div>
									<p class="help-text">- 참고치(정상): 80 미만</p>
								</div>
							</div><!-- blood-pressure 끝 -->
						</div>
					</li>
					<li>
						<div class="title">공복혈당</div>
						<div class="con">
							<div class="unit">
								<input type="text" id="" name="" placeholder="공복혈당을 입력해주세요" class="input-regular unit-add">
								<span>mmHg</span>
							</div>
							<p class="help-text">- 참고치(정상): 100 미만</p>
						</div>
					</li>
					<li>
						<div class="title">총 콜레스테롤</div>
						<div class="con">
							<div class="unit">
								<input type="text" id="" name="" placeholder="총 콜레스테롤을 입력해주세요" class="input-regular unit-add">
								<span>mmHg</span>
							</div>
							<p class="help-text">- 참고치(정상): 200 미만</p>
						</div>
					</li>
					<li>
						<div class="title">LDL 콜레스테롤</div>
						<div class="con">
							<div class="unit">
								<input type="text" id="" name="" placeholder="LDL 콜레스테롤을 입력해주세요" class="input-regular unit-add">
								<span>mmHg</span>
							</div>
							<p class="help-text">- 참고치(정상): 130 미만</p>
						</div>
					</li>
					<li>
						<div class="title">중성지방</div>
						<div class="con">
							<div class="unit">
								<input type="text" id="" name="" placeholder="중성지방을 입력해주세요" class="input-regular unit-add">
								<span>mmHg</span>
							</div>
							<p class="help-text">- 참고치(정상): 150 미만</p>
						</div>
					</li>
					<li>
						<div class="title">HDL 콜레스테롤</div>
						<div class="con">
							<div class="unit">
								<input type="text" id="" name="" placeholder="HDL 콜레스테롤을 입력해주세요" class="input-regular unit-add">
								<span>mmHg</span>
							</div>
							<p class="help-text">- 참고치(정상): 60 이상</p>
						</div>
					</li>
				</ul>
			</div>

			<div class="sub-title-small margin-t8">
				<h1>기타 검진 내역</h1>
			</div>
			<div class="block-type-area">
				<ul>
					<li>
						<div class="title">요단백</div>
						<div class="con">
							<select name="" class="input-regular">
								<option value="" selected="selected">요단백 결과를 선택해주세요</option>
								<option value=""></option>
							</select>
							<p class="help-text">- 참고치(정상): 음성</p>
						</div>
					</li>
					<li>
						<div class="title">혈색소</div>
						<div class="con">
							<div class="unit">
								<input type="text" id="" name="" placeholder="혈색소를 입력해주세요" class="input-regular unit-add">
								<span>g/dL</span>
							</div>
							<p class="help-text">- 참고치(정상): 남(13~16.5), 여(12~15.5)</p>
						</div>
					</li>
					<li>
						<div class="title">혈청크레아티닌</div>
						<div class="con">
							<div class="unit">
								<input type="text" id="" name="" placeholder="혈청크레아티닌을 입력해주세요" class="input-regular unit-add">
								<span>mg/dL</span>
							</div>
							<p class="help-text">- 참고치(정상): 1.5 이하</p>
						</div>
					</li>
					<li>
						<div class="title">신사구체여과율(GFR)</div>
						<div class="con">
							<div class="unit">
								<input type="text" id="" name="" placeholder="신사구체여과율을 입력해주세요" class="input-regular unit-add">
								<span>mL/min</span>
							</div>
							<p class="help-text">- 참고치(정상): 60 이상</p>
						</div>
					</li>
					<li>
						<div class="title">AST(SGOT)</div>
						<div class="con">
							<div class="unit">
								<input type="text" id="" name="" placeholder="AST(SGOT)를 입력해주세요" class="input-regular unit-add">
								<span>U/L</span>
							</div>
							<p class="help-text">- 참고치(정상): 40 이하</p>
						</div>
					</li>
					<li>
						<div class="title">ALT(SGPT)</div>
						<div class="con">
							<div class="unit">
								<input type="text" id="" name="" placeholder="ALT(SGPT)를 입력해주세요" class="input-regular unit-add">
								<span>U/L</span>
							</div>
							<p class="help-text">- 참고치(정상): 35 이하</p>
						</div>
					</li>
					<li>
						<div class="title">감마지피티(γ-GPT)</div>
						<div class="con">
							<div class="unit">
								<input type="text" id="" name="" placeholder="감마지피티를 입력해주세요" class="input-regular unit-add">
								<span>U/L</span>
							</div>
							<p class="help-text">- 참고치(정상): 남(11~63), 여(8~35)</p>
						</div>
					</li>
					<li>
						<div class="title">사진첨부</div>
						<div class="con">
							<div class="file-upload">
								<input type="hidden" name="bg_file1_cnt" id="bg_file1_cnt" value="" />
								<div class="gallery" id="bg_file1_view"></div>
								<div class="upload">
									<button type="button" class="btn-small img-type">사진 선택</button>
									<input type="file" id="bg_file1" multiple="multiple" name="bg_file1[]" accept="image/*" />
								</div>
							</div>
							<p class="help-text">- 이미지는 최대 6장까지 등록 가능합니다.</p>
						</div>
					</li>
				</ul>
			</div>

			<div class="btn-group-type1">
				<button type="button" class="btn-medium width152 radius-half theme1-c-btn line">취소</button><button type="submit"
					class="btn-medium width152 radius-half theme1-c-btn">저장</button>
			</div>
		</form>

	</div>
</section>
<!-- *컨텐츠* 끝 -->



<div class="popup popup-coin-info radius16 show">
	<div class="inner-wrap">
		<h5 class="popup-header">코인 안내</h5>
		<div class="popup-content">
			<p>
				<strong class="theme2-c-font">100</strong> 코인이 지급될 예정입니다.<br />
				디바이스를 연동해서 추가 코인을 획득하세요!
			</p>
		</div>
		<button class="btn-medium flexible theme1-c-btn radius-half b-close">닫기</button>
		<span class="popup-close b-close"></span> <!-- b-close는 bPopup Js의 close class-->
	</div>
</div>

<script type="text/javascript">
	$(document).ready(function () {
		$(".popup-coin-info.show").bPopup({ // 팝업시키려는 대상 class 입력, show값은 고정
			zIndex: 100, // z-index 순서설정
			appendTo: '#content',
			modalClose: true, // 영역제외 클릭해도 팝업창 닫히게합니까?
			escClose: true, // esc눌르면 화면닫히게
			follow: [true, true], // 화면을 따라다니게 만들기 설정값은 고정되는부분을 true로 둠 x, y
			modal: true, // true시 백그라운드 dim 추가여부 true시 dim배경생김
			opacity: 0.4, // dim-layer opacity 설정
			easing: 'linear' // animation css 효과 설정
		});
	});
</script>

<!-- 파일 업로드 관련 JS start-->
<script type="text/javascript">
	var bg_file1 = Array(); //멀티업로드에 사용되는 $_FILES배열
	var index1 = 0; //멀티업로드 이미지 삭제에 필요한 일렬번호
	var bg_file2 = Array(); //멀티업로드에 사용되는 $_FILES배열
	var index2 = 0; //멀티업로드 이미지 삭제에 필요한 일렬번호

	function img_multiple_cnt_chk(file_name) {
		var max_count = 10 - parseInt($('#' + file_name + '_cnt').val());
		image_gallery_upload_multiple(file_name, max_count);
	}
	function _formatSizeUnits(bytes) {
		if (bytes >= 1000000000) { bytes = (bytes / 1000000000).toFixed(2) + ' GB'; }
		else if (bytes >= 1000000) { bytes = (bytes / 1000000).toFixed(2) + ' MB'; }
		else if (bytes >= 1000) { bytes = (bytes / 1000).toFixed(2) + ' KB'; }
		else if (bytes > 1) { bytes = bytes + ' bytes'; }
		else if (bytes == 1) { bytes = bytes + ' byte'; }
		else { bytes = '0 byte'; }
		return bytes;
	}
	function handleImgFileSelect_1(e) {
		var files = e.target.files;
		var filesArr = Array.prototype.slice.call(files);
		var img_cnt = parseInt($('#bg_file1_cnt').val()) || 0;
		var tmp_type_pass = 0; //이미지 인지 확인하는 구분자
		var tmp_count_pass = 0; //총 이미지수 확인하는 구분자
		var tmp_cnt = 0; //이미지 올리는 숫자

		filesArr.forEach(function (f) {
			if (!f.type.match("image")) {
				tmp_type_pass = 1;
				return false;
			} else {
				bg_file1.push(f);
			}
			tot_img_cnt = img_cnt + filesArr.length;
			if (tot_img_cnt > 10) {
				tmp_count_pass = 1;
				return false;
			} else {
				tmp_cnt++;
			}
			var reader = new FileReader();
			reader.onload = function (e) {
				var html = '';
				html += '<div class="img-thumb bg_file1_' + index1 + '">';
				html += '	<span onclick="deleteImageAction_1(' + index1 + ')" class="delete"></span>';
				html += '	<img src="' + e.target.result + '" data-file="' + f.name + '" ';
				html += '</div>';
				$("#bg_file1_view").append(html);
				index1++;
			}
			reader.readAsDataURL(f);
		});
		if (tmp_type_pass == 1) {
			alert("확장자는 이미지 확장자만 가능합니다.");
		}
		if (tmp_count_pass == 1) {
			alert("총 10장이상 등록이 불가능합니다.");
			$('#bg_file1').val('');
		}
		$(".file-upload").css('clear', 'left');
		$("#bg_file1_cnt").val(img_cnt + tmp_cnt);
	}
	function deleteImageAction_1(index) {
		// console.log("index : "+index);
		bg_file1.splice(index, 1, null);
		var img_id = ".bg_file1_" + index;
		$(img_id).remove();
		var img_cnt = parseInt($("#bg_file1_cnt").val());
		img_cnt = img_cnt - 1;
		$("#bg_file1_cnt").val(img_cnt);
		// console.log(sel_files);
	}

	function handleImgFileSelect_2(e) {
		var files = e.target.files;
		var filesArr = Array.prototype.slice.call(files);
		var img_cnt = parseInt($('#bg_file2_cnt').val()) || 0;
		var tmp_type_pass = 0; //이미지 인지 확인하는 구분자
		var tmp_count_pass = 0; //총 이미지수 확인하는 구분자
		var tmp_cnt = 0; //이미지 올리는 숫자

		filesArr.forEach(function (f) {
			bg_file2.push(f);
			tot_img_cnt = img_cnt + filesArr.length;
			if (tot_img_cnt > 10) {
				tmp_count_pass = 1;
				return false;
			} else {
				tmp_cnt++;
			}
			var reader = new FileReader();
			reader.onload = function (e) {
				console.log(f);
				var html = '';
				html += '<div class="file-thumb bg_file2_' + index2 + '">';
				html += '	<span onclick="deleteImageAction_2(' + index2 + ')" class="delete"></span>';
				if (f.type.match("image")) {
					html += '<img src="' + e.target.result + '" data-file="' + f.name + '" ';
				} else {
					html += '<span class="name">' + f.name + '</span>';
					html += '<span class="size">' + _formatSizeUnits(f.size) + '</span>';
				}
				html += '</div>';
				$("#bg_file2_view").append(html);
				index2++;
			}
			reader.readAsDataURL(f);
		});
		if (tmp_count_pass == 1) {
			alert("총 10장이상 등록이 불가능합니다.");
			$('#bg_file1').val('');
		}
		$(".file-upload").css('clear', 'left');
		$("#bg_file2_cnt").val(img_cnt + tmp_cnt);
	}
	function deleteImageAction_2(index) {
		console.log("index : " + index);
		bg_file2.splice(index, 1, null);
		var img_id = ".bg_file2_" + index;
		$(img_id).remove();
		var img_cnt = parseInt($("#bg_file2_cnt").val());
		img_cnt = img_cnt - 1;
		$("#bg_file2_cnt").val(img_cnt);
	}

	$(document).ready(function () {
		$('#bg_file1').on('change', handleImgFileSelect_1);
		$('#bg_file2').on('change', handleImgFileSelect_2);
	});
	$(function () {
		$(document).on('change', 'input.thumb_file', function () {
			var $this = $(this);
			var files = $(this)[0].files[0];
			var preview_area = $this.parent().parent().find('.img-thumb');
			if (!files) {
				$this.val('');
				preview_area.html('');
				return;
			}
			if (files.type.match('image')) {
				var img = "<img src='" + window.URL.createObjectURL(files) + "' class='preview_files' />";
				var objs = "<span class='delete thumb_delete'></span>" + img;
				preview_area.html(objs);
			} else {
				alert('이미지만 첨부하세요');
			}
		});
		$(document).on('click', 'span.thumb_delete', function (e) {
			e.preventDefault();
			var file_area = $(this).parent().parent().parent();
			file_area.find('.img-thumb').html('');
			if (navigator.userAgent.toLowerCase().indexOf("msie") != -1) {
				var file_input = file_area.find('input.thumb_file');
				file_input.replaceWith(file_input.clone(true)); // ie 일때 초기화
			} else {
				file_area.find('input.thumb_file').val('');
			}
		});
	});

</script>
<!-- 파일 업로드 관련 JS end-->


<!-- *푸터* include -->
<?php require_once('./inc/footer.html');?>